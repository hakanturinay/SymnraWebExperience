import*as THREE from"three";import{OrbitControls}from"three/examples/jsm/controls/OrbitControls.js";import{GLTFLoader}from"three/examples/jsm/loaders/GLTFLoader.js";import{gsap}from"gsap";import{DRACOLoader}from"three/examples/jsm/loaders/DRACOLoader.js";import{RGBELoader}from"three/addons/loaders/RGBELoader.js";import{Vector3}from"three";let isWeb=!0,minZoom=2,maxZoom=4,cameraPos=new THREE.Vector3(0,1.75,-3.5),point0Pos=new THREE.Vector3(0,.85,.4),point1Pos=new THREE.Vector3(1.2,0,-.7),point2Pos=new THREE.Vector3(-1.1,.15,-.4),point3Pos=new THREE.Vector3(-1.7,.8,.45),point4Pos=new THREE.Vector3(-.5,.8,-.2),point5Pos=new THREE.Vector3(1,.85,.1);/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?(isWeb=!1,document.getElementById("qr-code-id").style.display="none",minZoom=4,maxZoom=8,cameraPos.x=.09970961110599963,cameraPos.y=1.9948329305826507,cameraPos.z=-6.56175133424877,point0Pos=new THREE.Vector3(.1,1,.5),point1Pos=new THREE.Vector3(1.35,0,-.7),point2Pos=new THREE.Vector3(-.8,.2,-.4),point3Pos=new THREE.Vector3(-1.7,.9,.45),point4Pos=new THREE.Vector3(-.5,.85,-.2)):(isWeb=!0,minZoom=2,maxZoom=4);const loadingBarElement=document.querySelector(".loading-bar"),textureLoader=new THREE.TextureLoader;let sceneReady=!1;const loadingManager=new THREE.LoadingManager((()=>{window.setTimeout((()=>{gsap.to(overlayMaterial.uniforms.uAlpha,{duration:3,value:0,delay:1}),loadingBarElement.classList.add("ended"),loadingBarElement.style.transform=""}),500),window.setTimeout((()=>{document.getElementById("logo").classList.add("fade-in"),document.getElementById("nominated-logo").classList.add("fade-in"),document.getElementById("modalView").classList.add("fade-in"),document.getElementById("modalView").style.display="flex",sceneReady=!0}),2500)}),((e,t,n)=>{const o=t/n;loadingBarElement.style.transform=`scaleX(${o})`})),dracoLoader=new DRACOLoader;dracoLoader.setDecoderPath("/draco/");const gltfLoader=new GLTFLoader(loadingManager);gltfLoader.setDRACOLoader(dracoLoader);const cubeTextureLoader=new THREE.CubeTextureLoader(loadingManager),debugObject={},canvas=document.querySelector("canvas.webgl"),scene=new THREE.Scene,overlayGeometry=new THREE.PlaneGeometry(2,2,1,1),overlayMaterial=new THREE.ShaderMaterial({transparent:!0,uniforms:{uAlpha:{value:1}},vertexShader:"\n        void main()\n        {\n            gl_Position = vec4(position, 1.0);\n        }\n    ",fragmentShader:"\n        uniform float uAlpha;\n\n        void main()\n        {\n \n            gl_FragColor = vec4(0.086, 0.086, 0.094, uAlpha);\n        }\n    "}),overlay=new THREE.Mesh(overlayGeometry,overlayMaterial);scene.add(overlay);const updateAllMaterials=()=>{scene.traverse((e=>{e instanceof THREE.Mesh&&e.material instanceof THREE.MeshStandardMaterial&&(e.material.envMapIntensity=debugObject.envMapIntensity,e.material.needsUpdate=!0,e.castShadow=!0,e.receiveShadow=!0)}))},environmentMap=cubeTextureLoader.load(["/textures/environmentMaps/3/px.jpg","/textures/environmentMaps/3/nx.jpg","/textures/environmentMaps/3/py.jpg","/textures/environmentMaps/3/ny.jpg","/textures/environmentMaps/3/pz.jpg","/textures/environmentMaps/3/nz.jpg"]);var model,mixer;environmentMap.colorSpace=THREE.SRGBColorSpace,scene.environment=environmentMap,debugObject.envMapIntensity=2;const glassMaterial=new THREE.MeshStandardMaterial({color:0,transparent:!0,opacity:.3,side:THREE.DoubleSide}),bottleMaterial=new THREE.MeshStandardMaterial({color:4013890,transparent:!0,opacity:.35,side:THREE.DoubleSide});var animations;const planeSize=.5,geometry=new THREE.PlaneGeometry(.5,.5);var videoBriskSmokeSide=document.createElement("video");videoBriskSmokeSide.src="/videos/Coffee_Steam_Long_Version.mp4";var videoTextureBriskSmokeSide=new THREE.VideoTexture(videoBriskSmokeSide);videoBriskSmokeSide.setAttribute("preload","auto"),videoBriskSmokeSide.setAttribute("muted","true"),videoBriskSmokeSide.setAttribute("playsinline",""),videoBriskSmokeSide.setAttribute("webkit-playsinline","");const smokeMaterial=new THREE.MeshBasicMaterial({map:videoTextureBriskSmokeSide,side:THREE.DoubleSide});smokeMaterial.alphaMap=videoTextureBriskSmokeSide,smokeMaterial.transparent=!0,smokeMaterial.opacity=0;const planeMesh=new THREE.Mesh(geometry,smokeMaterial);scene.add(planeMesh),gltfLoader.load("/models/SMYRNA_ALLINONEKITCHEN_draco_v2.glb",(e=>{model=e.scene,e.scene.scale.set(1.75,1.75,1.75),e.scene.position.y-=.85,e.scene.position.x+=.15,e.scene.rotation.y=Math.PI;var t=model.getObjectByName("Cylinder003");t.material=bottleMaterial,t.renderOrder=-1,t.material.needsUpdate=!0,t.material.depthWrite=!1,model.getObjectByName("Fry_pan_FryPan_0_1").castShadow=!0,planeMesh.position.copy(model.getObjectByName("Pan_Pivot").position),planeMesh.position.x-=.625,planeMesh.position.z-=.38,planeMesh.position.y+=.05,planeMesh.rotation.x=Math.PI/6,planeMesh.renderOrder=-1,model.traverse((e=>{e.isMesh&&e.material&&"Glass"===e.material.name&&(e.position.y+=5e-4,e.renderOrder=-1,e.material=glassMaterial,e.material.needsUpdate=!0)})),animations=e.animations,mixer=new THREE.AnimationMixer(model),scene.add(e.scene),scene.traverse((e=>{e instanceof THREE.Mesh&&e.material instanceof THREE.MeshStandardMaterial&&(e.material.envMapIntensity=debugObject.envMapIntensity,e.material.needsUpdate=!0,e.castShadow=!0,e.receiveShadow=!0)}))})),gltfLoader.load("/models/wallModel3.glb",(e=>{e.scene.scale.set(1.75,1.75,1.75),e.scene.position.y-=.95,e.scene.rotation.y=Math.PI,e.scene.children[0].material.receiveShadow=!0,scene.add(e.scene)}));const raycaster=new THREE.Raycaster,points=[{position:point0Pos,element:document.querySelector(".point-0")},{position:point1Pos,element:document.querySelector(".point-1")},{position:point2Pos,element:document.querySelector(".point-2")},{position:point3Pos,element:document.querySelector(".point-3")},{position:point4Pos,element:document.querySelector(".point-4")},{position:point5Pos,element:document.querySelector(".point-5")}],animationFlags=[!1,!1,!1,!1,!1,!1],reverseAnimationFlags=[!1,!1,!1,!1,!1,!1],animationCompleted=[!1,!1,!1,!1,!1,!1];function runSpecificAnimation(e,t,n){if(animationFlags[t]||reverseAnimationFlags[t]||animationCompleted[t])return;animationFlags[t]=!0;const o=animations.find((t=>t.name===e)),i=mixer.clipAction(o);i.reset(),i.clampWhenFinished=!0,i.timeScale=1,i.setLoop(THREE.LoopOnce),points.forEach(((e,t)=>{t!==n&&(e.element.style.display="none")})),i.play();const a=function(e){e.action===i&&(animationFlags[t]=!1,animationCompleted[t]=!0,mixer.removeEventListener("finished",a))};mixer.addEventListener("finished",a)}function reverseSpecificAnimation(e,t,n){if(reverseAnimationFlags[t]||animationFlags[t]||!animationCompleted[t])return;reverseAnimationFlags[t]=!0;const o=animations.find((t=>t.name===e)),i=mixer.clipAction(o);0===i.time&&(i.time=i.getClip().duration),i.paused=!1,i.setLoop(THREE.LoopOnce),i.timeScale=-1,i.clampWhenFinished=!0,i.play();const a=function(e){e.action===i&&(reverseAnimationFlags[t]=!1,animationCompleted[t]=!1,points.forEach((e=>{e.element.style.display="block"})),mixer.removeEventListener("finished",a))};mixer.addEventListener("finished",a)}let counterDrawer=0,counterChair=0,counterPaddleBox=0,counterSideDrawer=0,counterSteakPan=0,counterAllAnimation=0;const titleContext=document.getElementById("title-context"),bodyContext=document.getElementById("body-context");function handleDrawerClick(){animationFlags.some((e=>e))||reverseAnimationFlags.some((e=>e))||(0===counterDrawer?(counterDrawer++,points[1].element.classList.add("clicked"),titleContext.innerHTML="Sink Cabinets",bodyContext.innerHTML="By combining the sink, waste bins, and additional storage into a single cabinet, this all-in-one design optimizes space usage. Placing the waste bins and storage in close proximity to the sink improves the overall workflow in the kitchen. This arrangement allows for a seamless transition between washing dishes, disposing of waste, and accessing frequently used kitchen tools and supplies.",runSpecificAnimation("MainBelow_Drawer.001",0,1),runSpecificAnimation("MainUpper_Drawer.001",1,1),document.getElementById("content").classList.add("fade-in"),document.getElementById("content").classList.remove("fade-out"),document.getElementById("category-card").style.pointerEvents="all",document.getElementById("content").scrollTop=0):(counterDrawer--,points[1].element.classList.remove("clicked"),reverseSpecificAnimation("MainBelow_Drawer.001",0,1),reverseSpecificAnimation("MainUpper_Drawer.001",1,1),document.getElementById("content").classList.remove("fade-in"),document.getElementById("content").classList.add("fade-out"),setTimeout((()=>{document.getElementById("category-card").style.pointerEvents="none"}),750)))}function handleChairClick(){animationFlags.some((e=>e))||reverseAnimationFlags.some((e=>e))||(0===counterChair?(counterChair++,points[2].element.classList.add("clicked"),runSpecificAnimation("BarStool_01.001",2,2),runSpecificAnimation("BarStool_02.002",3,2),document.getElementById("content").classList.add("fade-in"),document.getElementById("content").classList.remove("fade-out"),document.getElementById("category-card").style.pointerEvents="all",document.getElementById("content").scrollTop=0,titleContext.innerHTML="Hidden Bar Stools",bodyContext.innerHTML="The inclusion of hidden bar stools ensures that additional seating is readily available without occupying valuable floor space. When not in use, the bar stools can be neatly tucked away under the counter, maintaining a clutter-free and streamlined look in the kitchen."):(counterChair--,points[2].element.classList.remove("clicked"),reverseSpecificAnimation("BarStool_01.001",2,2),reverseSpecificAnimation("BarStool_02.002",3,2),document.getElementById("content").classList.remove("fade-in"),document.getElementById("content").classList.add("fade-out"),document.getElementById("content").scrollTop=0,setTimeout((()=>{document.getElementById("category-card").style.pointerEvents="none"}),750)))}function handlePaddleBoxClick(){animationFlags.some((e=>e))||reverseAnimationFlags.some((e=>e))||(0===counterPaddleBox?(counterPaddleBox++,points[0].element.classList.add("clicked"),document.getElementById("content").classList.add("fade-in"),document.getElementById("content").classList.remove("fade-out"),document.getElementById("category-card").style.pointerEvents="all",document.getElementById("content").scrollTop=0,titleContext.innerHTML="Downdraft Hood",bodyContext.innerHTML="The downdraft hood is an integral part of this all-in-one kitchen design. It effectively captures and removes cooking odors, smoke, and grease at the source by drawing them downward, thereby enhancing ventilation and maintaining a clean kitchen environment.",runSpecificAnimation("Davlumbaz.001",4,0)):(counterPaddleBox--,points[0].element.classList.remove("clicked"),reverseSpecificAnimation("Davlumbaz.001",4,0),document.getElementById("content").classList.remove("fade-in"),document.getElementById("content").classList.add("fade-out"),setTimeout((()=>{document.getElementById("category-card").style.pointerEvents="none"}),750)))}function handleSideDrawerClick(){animationFlags.some((e=>e))||reverseAnimationFlags.some((e=>e))||(0===counterSideDrawer?(counterSideDrawer++,points[3].element.classList.add("clicked"),document.getElementById("content").classList.add("fade-in"),document.getElementById("content").classList.remove("fade-out"),document.getElementById("category-card").style.pointerEvents="all",document.getElementById("content").scrollTop=0,titleContext.innerHTML="Hidden Vertical Cabinet",bodyContext.innerHTML="The hidden vertical cabinet is an innovative storage solution, providing ample space for storing kitchen essentials, pantry items, and cookware. This maximizes storage capacity without compromising on the overall aesthetics of the kitchen.",runSpecificAnimation("SideDrawer",5,3)):(counterSideDrawer--,points[3].element.classList.remove("clicked"),reverseSpecificAnimation("SideDrawer",5,3),document.getElementById("content").classList.remove("fade-in"),document.getElementById("content").classList.add("fade-out"),setTimeout((()=>{document.getElementById("category-card").style.pointerEvents="none"}),750)))}const steakAudio=document.getElementById("steakSound");function handleSteakPan(){animationFlags.some((e=>e))||reverseAnimationFlags.some((e=>e))||(0===counterSteakPan?(counterSteakPan++,steakAudio.play(),points[4].element.classList.add("clicked"),runSpecificAnimation("Pan_Animation",6,4),runSpecificAnimation("Steak_Animation",7,4),document.getElementById("content").classList.add("fade-in"),document.getElementById("content").classList.remove("fade-out"),document.getElementById("category-card").style.pointerEvents="all",document.getElementById("content").scrollTop=0,titleContext.innerHTML="Induction Cooktop",bodyContext.innerHTML="The inclusion of an induction cooktop offers several advantages. It is energy-efficient, fast, and safe, as it only heats the cookware and not the surrounding surface. Induction cooking also provides the space that is usually occupied by the common cooktop, and creates the cleanest look.",setTimeout((()=>{smokeMaterial.opacity=.35,videoBriskSmokeSide.play(),videoBriskSmokeSide.loop=!0}),750)):(counterSteakPan--,steakAudio.pause(),steakAudio.currentTime=0,points[4].element.classList.remove("clicked"),reverseSpecificAnimation("Pan_Animation",6,4),reverseSpecificAnimation("Steak_Animation",7,4),document.getElementById("content").classList.remove("fade-in"),document.getElementById("content").classList.add("fade-out"),setTimeout((()=>{document.getElementById("category-card").style.pointerEvents="none"}),750),setTimeout((()=>{smokeMaterial.opacity=0,videoBriskSmokeSide.pause()}),500)))}function handleWoodClick(){animationFlags.some((e=>e))||reverseAnimationFlags.some((e=>e))||(0===counterSideDrawer?(counterSideDrawer++,points[5].element.classList.add("clicked"),runSpecificAnimation("Action",8,5),document.getElementById("content").classList.add("fade-in"),document.getElementById("content").classList.remove("fade-out"),document.getElementById("category-card").style.pointerEvents="all",document.getElementById("content").scrollTop=0,titleContext.innerHTML="Built in Drainer",bodyContext.innerHTML="The kitchen features a built-in drainer, which provides a convenient area for drying dishes and other kitchenware. This eliminates the need for a separate dish rack or drying area, saving additional space on the countertop and promoting a neat and organized kitchen environment."):(counterSideDrawer--,points[5].element.classList.remove("clicked"),reverseSpecificAnimation("Action",8,5),document.getElementById("content").classList.remove("fade-in"),document.getElementById("content").classList.add("fade-out"),setTimeout((()=>{document.getElementById("category-card").style.pointerEvents="none"}),750)))}function handleRunAllAnimationClick(){if(!animationFlags.some((e=>e))&&!reverseAnimationFlags.some((e=>e))){for(var e=0;e<points.length;e++)points[e].element.classList.remove("clicked");0===counterAllAnimation?(counterAllAnimation++,document.getElementById("content").classList.contains("fade-in")&&document.getElementById("content").classList.add("fade-out"),runSpecificAnimation("MainBelow_Drawer.001",0),runSpecificAnimation("MainUpper_Drawer.001",1),runSpecificAnimation("BarStool_01.001",2),runSpecificAnimation("BarStool_02.002",3),runSpecificAnimation("Davlumbaz.001",4),runSpecificAnimation("SideDrawer",5),runSpecificAnimation("Pan_Animation",6),runSpecificAnimation("Steak_Animation",7),runSpecificAnimation("Action",8),setTimeout((()=>{smokeMaterial.opacity=.35,videoBriskSmokeSide.play(),videoBriskSmokeSide.loop=!0}),750)):(counterAllAnimation--,reverseSpecificAnimation("MainBelow_Drawer.001",0),reverseSpecificAnimation("MainUpper_Drawer.001",1),reverseSpecificAnimation("BarStool_01.001",2),reverseSpecificAnimation("BarStool_02.002",3),reverseSpecificAnimation("Davlumbaz.001",4),reverseSpecificAnimation("SideDrawer",5),reverseSpecificAnimation("Pan_Animation",6),reverseSpecificAnimation("Steak_Animation",7),reverseSpecificAnimation("Action",8),setTimeout((()=>{smokeMaterial.opacity=0}),500))}}document.getElementById("scene-drawer").addEventListener("click",handleDrawerClick),document.getElementById("scene-chair").addEventListener("click",handleChairClick),document.getElementById("scene-paddleBox").addEventListener("click",handlePaddleBoxClick),document.getElementById("scene-sideDrawer").addEventListener("click",handleSideDrawerClick),document.getElementById("run-all-animation").addEventListener("click",handleRunAllAnimationClick),document.getElementById("scene-Steak&Pan").addEventListener("click",handleSteakPan),document.getElementById("scene-Wood").addEventListener("click",handleWoodClick);const qrButton=document.getElementById("qr-button-id"),qrCodeElement=document.getElementById("qr-code-id"),startExperience=document.getElementById("button-skipIntro");let qrButtonHandler=0;startExperience.addEventListener("click",(function(){document.getElementById("modalView").classList.add("fade-out"),document.getElementById("bottom-buttons").classList.add("fade-in"),document.getElementById("all-points").classList.add("fade-in"),document.getElementById("bottom-buttons").style.display="flex",document.getElementById("all-points").style.display="flex",document.getElementById("content").style.display="flex",document.getElementById("modalView").style.display="none",document.getElementById("audioEmbed").play()}));const redirectButton=document.getElementById("button-learn-more");let flagQr;redirectButton.addEventListener("click",(()=>{window.location.href="https://smyrna-design.de/contact-us/"})),qrButton.addEventListener("click",(function(){if(isWeb)qrButtonHandler=(qrButtonHandler+1)%2,qrCodeElement.classList.toggle("fade-in",1===qrButtonHandler),qrCodeElement.classList.toggle("fade-out",1!==qrButtonHandler);else{const e="https://smyrna-ar.netlify.app";window.open(e,"_blank")}}));const volumeButton=document.getElementById("volumeButton"),volumeSpan=document.getElementById("volume-span"),audioEmbed=document.getElementById("audioEmbed");let currentIcon="volume_up";volumeButton.addEventListener("click",(function(){"volume_up"===currentIcon?(volumeSpan.textContent="volume_off",currentIcon="volume_off",audioEmbed.pause()):(volumeSpan.textContent="volume_up",currentIcon="volume_up",audioEmbed.play())}));const directionalLight=new THREE.DirectionalLight("#ffffff",3);directionalLight.castShadow=!0,directionalLight.shadow.camera.far=15,directionalLight.shadow.mapSize.set(2048,2048),directionalLight.shadow.normalBias=.05,directionalLight.position.set(.25,2,-.25),scene.add(directionalLight);const sizes={width:window.innerWidth,height:window.innerHeight};window.addEventListener("resize",(()=>{sizes.width=window.innerWidth,sizes.height=window.innerHeight,camera.aspect=sizes.width/sizes.height,camera.updateProjectionMatrix(),renderer.setSize(sizes.width,sizes.height),renderer.setPixelRatio(Math.min(window.devicePixelRatio,2))}));const camera=new THREE.PerspectiveCamera(65,sizes.width/sizes.height,.1,100);camera.position.set(cameraPos.x,cameraPos.y,cameraPos.z),scene.add(camera);const controls=new OrbitControls(camera,canvas);controls.maxPolarAngle=Math.PI/2,controls.maxAzimuthAngle=1.35*Math.PI,controls.minAzimuthAngle=Math.PI/1.5,controls.enableDamping=!0,controls.dampingFactor=.05,controls.enableZoom=!0,controls.zoomSpeed=.75,controls.enableRotate=!0,controls.rotateSpeed=.5,controls.enablePan=!1,controls.minDistance=minZoom,controls.maxDistance=maxZoom;const renderer=new THREE.WebGLRenderer({canvas:canvas,antialias:!0});renderer.useLegacyLights=!1,renderer.toneMapping=THREE.ReinhardToneMapping,renderer.toneMappingExposure=3,renderer.shadowMap.enabled=!0,renderer.shadowMap.type=THREE.PCFSoftShadowMap,renderer.setSize(sizes.width,sizes.height),renderer.setPixelRatio(Math.min(window.devicePixelRatio,2)),renderer.outputEncoding=THREE.sRGBEncoding;const clock=new THREE.Clock,tick=()=>{if(controls.update(),mixer){const e=clock.getDelta();mixer.update(e)}if(sceneReady)for(const e of points){const t=e.position.clone();t.project(camera),raycaster.setFromCamera(t,camera);const n=raycaster.intersectObjects(scene.children,!0);if(0===n.length)e.element.classList.add("visible");else{n[0].distance<e.position.distanceTo(camera.position)-.5?e.element.classList.remove("visible"):e.element.classList.add("visible")}const o=t.x*sizes.width*.5,i=-t.y*sizes.height*.5;e.element.style.transform=`translateX(${o}px) translateY(${i}px)`}renderer.render(scene,camera),window.requestAnimationFrame(tick)};tick();